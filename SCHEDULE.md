# üìÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–∫–ª–∞–¥ –ø–µ—Ä–µ–Ω–∞–≤—á–∞–Ω–Ω—è

## üéØ –°—Ç—Ä–∞—Ç–µ–≥—ñ—è –ø–µ—Ä–µ–Ω–∞–≤—á–∞–Ω–Ω—è –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó —è–∫–æ—Å—Ç—ñ

---

## ‚è∞ –ü–æ–≤–Ω–∏–π —Ä–æ–∑–∫–ª–∞–¥ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

### üìä **–©–æ–¥–µ–Ω–Ω–æ –æ 01:00** - –®–≤–∏–¥–∫–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è (30 —Ö–≤–∏–ª–∏–Ω)
**–§–∞–π–ª:** `daily_quick_retrain.bat`

```batch
python run_improved_pipeline.py --skip-history
```

**–©–æ —Ä–æ–±–∏—Ç—å:**
- ‚úÖ –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î —Å–≤—ñ–∂—ñ –¥–∞–Ω—ñ –∑ MT5
- ‚úÖ –ü–µ—Ä–µ—Ç—Ä–µ–Ω—É—î LSTM/GRU –º–æ–¥–µ–ª—ñ
- ‚úÖ –ì–µ–Ω–µ—Ä—É—î –Ω–æ–≤—ñ —Å–∏–≥–Ω–∞–ª–∏
- ‚è±Ô∏è –ß–∞—Å: 30-60 —Ö–≤–∏–ª–∏–Ω

**Task Scheduler:**
- **–¢—Ä–∏–≥–µ—Ä:** –©–æ–¥–Ω—è –æ 01:00
- **–ü—Ä–æ–≥—Ä–∞–º–∞:** `D:\LLM\LSTMC\daily_quick_retrain.bat`

---

### üîÑ **–°—É–±–æ—Ç–∞ –æ 02:00** - –ü–æ–≤–Ω–µ –ø–µ—Ä–µ–Ω–∞–≤—á–∞–Ω–Ω—è (2-4 –≥–æ–¥–∏–Ω–∏)
**–§–∞–π–ª:** `saturday_full_retrain.bat`

```batch
python run_improved_pipeline.py --model-type ensemble --meta-ensemble --cv-folds 5
```

**–©–æ —Ä–æ–±–∏—Ç—å:**
- ‚úÖ –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î –¥–∞–Ω—ñ –∑–∞ 5 —Ä–æ–∫—ñ–≤ –¥–ª—è M15
- ‚úÖ –¢—Ä–µ–Ω—É—î LSTM + GRU + Attention –º–æ–¥–µ–ª—ñ
- ‚úÖ –ì–µ–Ω–µ—Ä—É—î 365 –¥–Ω—ñ–≤ —ñ—Å—Ç–æ—Ä—ñ—ó
- ‚úÖ –¢—Ä–µ–Ω—É—î LightGBM + XGBoost ensemble
- ‚úÖ –í–∏–∫–æ–Ω—É—î 5-fold cross-validation
- ‚úÖ –†–æ–∑—Ä–∞—Ö–æ–≤—É—î —Ñ—ñ–Ω–∞–Ω—Å–æ–≤—ñ –º–µ—Ç—Ä–∏–∫–∏
- ‚è±Ô∏è –ß–∞—Å: 2-4 –≥–æ–¥–∏–Ω–∏

**–ß–æ–º—É —Å—É–±–æ—Ç–∞:**
- ‚úÖ Forex —Ä–∏–Ω–æ–∫ **–ó–ê–ö–†–ò–¢–ò–ô** (–ø'—è—Ç–Ω–∏—Ü—è 23:00 ‚Üí –Ω–µ–¥—ñ–ª—è 23:00)
- ‚úÖ –ú–æ–∂–Ω–∞ —Å–ø–æ–∫—ñ–π–Ω–æ –ø–µ—Ä–µ–Ω–∞–≤—á–∞—Ç–∏ –±–µ–∑ —Ä–∏–∑–∏–∫—É –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ —Å–∏–≥–Ω–∞–ª–∏
- ‚úÖ –ì–æ—Ç–æ–≤—ñ fresh –º–æ–¥–µ–ª—ñ –¥–æ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è —Ä–∏–Ω–∫—É –≤ –Ω–µ–¥—ñ–ª—é

**Task Scheduler:**
- **–¢—Ä–∏–≥–µ—Ä:** –©–æ—Ç–∏–∂–Ω—è –≤ —Å—É–±–æ—Ç—É –æ 02:00
- **–ü—Ä–æ–≥—Ä–∞–º–∞:** `D:\LLM\LSTMC\saturday_full_retrain.bat`

---

### ‚ö° **–û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ: M15 —â–æ–¥–Ω—è –æ 23:00** (15 —Ö–≤–∏–ª–∏–Ω)
**–§–∞–π–ª:** `m15_specialized_retrain.bat`

```batch
python scripts/train_lstm.py --config config.yaml --model-type gru --no-augment
python scripts/infer_signals.py --config config.yaml
```

**–ß–æ–º—É M15 –ø–æ—Ç—Ä–µ–±—É—î —á–∞—Å—Ç—ñ—à–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:**
- M15 = 96 —Å–≤—ñ—á–æ–∫ –Ω–∞ –¥–µ–Ω—å (–±–∞–≥–∞—Ç–æ –Ω–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö)
- –ü–∞—Ç—Ç–µ—Ä–Ω–∏ –∑–º—ñ–Ω—é—é—Ç—å—Å—è —à–≤–∏–¥—à–µ
- GRU —Ç—Ä–µ–Ω—É—î—Ç—å—Å—è —à–≤–∏–¥–∫–æ (~10-15 —Ö–≤)

**Task Scheduler:**
- **–¢—Ä–∏–≥–µ—Ä:** –©–æ–¥–Ω—è –æ 23:00 (–ø—ñ—Å–ª—è –∑–∞–∫—Ä–∏—Ç—Ç—è —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –¥–Ω—è)
- **–ü—Ä–æ–≥—Ä–∞–º–∞:** `D:\LLM\LSTMC\m15_specialized_retrain.bat`

---

## üìã –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Windows Task Scheduler

### –ö—Ä–æ–∫ 1: –í—ñ–¥–∫—Ä–∏—Ç–∏ Task Scheduler
```
Win + R ‚Üí taskschd.msc ‚Üí Enter
```

### –ö—Ä–æ–∫ 2: –°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è "Daily Quick Retrain"

1. **Action** ‚Üí **Create Task**
2. **General tab:**
   - Name: `Forex LSTM - Daily Quick Retrain`
   - Run whether user is logged on or not: ‚úÖ
   - Run with highest privileges: ‚úÖ

3. **Triggers tab:**
   - New ‚Üí Daily ‚Üí 01:00
   - Enabled: ‚úÖ

4. **Actions tab:**
   - New ‚Üí Start a program
   - Program: `D:\LLM\LSTMC\daily_quick_retrain.bat`
   - Start in: `D:\LLM\LSTMC`

5. **Conditions tab:**
   - Start only if on AC power: ‚ùå (–≤–∏–º–∫–Ω—É—Ç–∏ —è–∫—â–æ –Ω–æ—É—Ç–±—É–∫)
   - Wake computer to run: ‚úÖ

6. **Settings tab:**
   - Allow task to run on demand: ‚úÖ
   - If task fails, restart every: 10 minutes
   - Attempt restart up to: 3 times

### –ö—Ä–æ–∫ 3: –°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è "Saturday Full Retrain"

–ê–Ω–∞–ª–æ–≥—ñ—á–Ω–æ, –∞–ª–µ:
- **Name:** `Forex LSTM - Saturday Full Retrain`
- **Trigger:** Weekly ‚Üí Saturday ‚Üí 02:00
- **Program:** `D:\LLM\LSTMC\saturday_full_retrain.bat`

### –ö—Ä–æ–∫ 4 (–û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ): "M15 Daily Evening"

–ê–Ω–∞–ª–æ–≥—ñ—á–Ω–æ, –∞–ª–µ:
- **Name:** `Forex LSTM - M15 Evening Update`
- **Trigger:** Daily ‚Üí 23:00
- **Program:** `D:\LLM\LSTMC\m15_specialized_retrain.bat`

---

## üìä –í—ñ–∑—É–∞–ª—å–Ω–∏–π —Ä–æ–∑–∫–ª–∞–¥

```
–ü–æ–Ω–µ–¥—ñ–ª–æ–∫ - –ü'—è—Ç–Ω–∏—Ü—è:
‚îú‚îÄ‚îÄ 01:00 ‚Üí –®–≤–∏–¥–∫–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è (30 —Ö–≤)
‚îî‚îÄ‚îÄ 23:00 ‚Üí M15 –æ–Ω–æ–≤–ª–µ–Ω–Ω—è (15 —Ö–≤) [–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ]

–°—É–±–æ—Ç–∞:
‚îú‚îÄ‚îÄ 02:00 ‚Üí –ü–û–í–ù–ï –ø–µ—Ä–µ–Ω–∞–≤—á–∞–Ω–Ω—è (2-4 –≥–æ–¥)
‚îÇ           ‚îú‚îÄ‚îÄ Ensemble –º–æ–¥–µ–ª–µ–π
‚îÇ           ‚îú‚îÄ‚îÄ –Ü—Å—Ç–æ—Ä—ñ—è 365 –¥–Ω—ñ–≤
‚îÇ           ‚îú‚îÄ‚îÄ Meta-ensemble
‚îÇ           ‚îî‚îÄ‚îÄ Cross-validation
‚îî‚îÄ‚îÄ 06:00 ‚Üí –ì–æ—Ç–æ–≤–æ –¥–æ –Ω–µ–¥—ñ–ª—ñ!

–ù–µ–¥—ñ–ª—è:
‚îî‚îÄ‚îÄ 23:00 ‚Üí –†–∏–Ω–æ–∫ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è, –º–æ–¥–µ–ª—ñ fresh!
```

---

## üéØ –û–Ω–æ–≤–ª–µ–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ M15

**–£ —Ñ–∞–π–ª—ñ `config.yaml`:**

```yaml
M15:
  years: 5              # 5 —Ä–æ–∫—ñ–≤ –¥–∞–Ω–∏—Ö –¥–ª—è M15
  seq_len: 96           # 24 –≥–æ–¥–∏–Ω–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É (96 √ó 15 —Ö–≤)
  horizon: 12           # 3 –≥–æ–¥–∏–Ω–∏ –ø—Ä–æ–≥–Ω–æ–∑ (12 √ó 15 —Ö–≤ = 180 —Ö–≤)
  atr_mult: 0.9         # –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è —à—É–º—É
  sl_mult: 0.9          # –†–µ–∞–ª—ñ—Å—Ç–∏—á–Ω—ñ SL/TP
  tp1_mult: 1.2
  tp2_mult: 1.8
```

**–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –¥–ª—è M15:**
- ‚úÖ **5 —Ä–æ–∫—ñ–≤ —ñ—Å—Ç–æ—Ä—ñ—ó** (–±—É–ª–æ 2 —Ä–æ–∫–∏) ‚Üí –±—ñ–ª—å—à–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ñ–≤
- ‚úÖ **seq_len: 96** (–±—É–ª–æ 64) ‚Üí –±—ñ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É (24 –≥–æ–¥ –∑–∞–º—ñ—Å—Ç—å 16 –≥–æ–¥)
- ‚úÖ **horizon: 12** (–±—É–ª–æ 10) ‚Üí —Ä–µ–∞–ª—ñ—Å—Ç–∏—á–Ω—ñ—à–∏–π —Ç–∞—Ä–≥–µ—Ç (3 –≥–æ–¥)
- ‚úÖ **–û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ –º—É–ª—å—Ç–∏–ø–ª—ñ–∫–∞—Ç–æ—Ä–∏** –¥–ª—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—ñ M15

---

## üîß –†—É—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è (–ø–µ—Ä–µ–¥ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º —Ä–æ–∑–∫–ª–∞–¥—É)

### 1. –®–≤–∏–¥–∫–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è (–ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏):
```bash
daily_quick_retrain.bat
```

### 2. –ü–æ–≤–Ω–µ –ø–µ—Ä–µ–Ω–∞–≤—á–∞–Ω–Ω—è (–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ó–ê–†–ê–ó):
```bash
saturday_full_retrain.bat
```

### 3. M15 —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–µ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ):
```bash
m15_specialized_retrain.bat
```

---

## üìà –û—á—ñ–∫—É–≤–∞–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

### –ó —Ü–∏–º —Ä–æ–∑–∫–ª–∞–¥–æ–º —Ç–∏ –æ—Ç—Ä–∏–º–∞—î—à:

| –ú–µ—Ç—Ä–∏–∫–∞ | –ë–µ–∑ —Ä–æ–∑–∫–ª–∞–¥—É | –ó —Ä–æ–∑–∫–ª–∞–¥–æ–º | –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è |
|---------|--------------|-------------|------------|
| **Accuracy M15** | 55-60% | 65-75% | +10-15% |
| **Fresh models** | –†—ñ–¥–∫–æ | –©–æ–¥–Ω—è | ‚úÖ |
| **Meta-quality** | –°—Ç–∞—Ä–∞ —ñ—Å—Ç–æ—Ä—ñ—è | –û–Ω–æ–≤–ª—é—î—Ç—å—Å—è —â–æ—Ç–∏–∂–Ω—è | ‚úÖ |
| **Sharpe Ratio** | 0.8-1.0 | 1.5-2.2 | +70-120% |
| **Max Drawdown** | 25-30% | 15-20% | -33-40% |

---

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤—ñ –Ω–æ—Ç–∞—Ç–∫–∏

### –î–ª—è M15:
- **5 —Ä–æ–∫—ñ–≤ –¥–∞–Ω–∏—Ö** = ~175,000 —Å–≤—ñ—á–æ–∫ (–≤–µ–ª–∏–∫–∏–π –¥–∞—Ç–∞—Å–µ—Ç!)
- –ü–µ—Ä—à–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–æ–∂–µ –∑–∞–π–Ω—è—Ç–∏ **30-60 —Ö–≤–∏–ª–∏–Ω**
- GRU —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ (—à–≤–∏–¥—à–µ –∑–∞ LSTM –Ω–∞ 30%)

### –î–ª—è —Å—É–±–æ—Ç–Ω—å–æ–≥–æ –ø–µ—Ä–µ–Ω–∞–≤—á–∞–Ω–Ω—è:
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Å—è —â–æ –∫–æ–º–ø'—é—Ç–µ—Ä **–ù–ï –≤–∏–º–∏–∫–∞—î—Ç—å—Å—è** –≤–Ω–æ—á—ñ
- –ê–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π Task Scheduler –∑ "Wake computer to run"
- –õ–æ–≥–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥:
```bash
# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥
type logs\daily_retrain.log

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ –ø—Ä–∞—Ü—é—î Task
Get-ScheduledTask | Where-Object {$_.TaskName -like "*Forex*"}
```

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü—ñ—Å–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ä–æ–∑–∫–ª–∞–¥—É:
1. ‚úÖ –ú–æ–¥–µ–ª—ñ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —â–æ–¥–Ω—è**
2. ‚úÖ –ü–æ–≤–Ω–µ –ø–µ—Ä–µ–Ω–∞–≤—á–∞–Ω–Ω—è **—â–æ—Å—É–±–æ—Ç–∏** (–∫–æ–ª–∏ —Ä–∏–Ω–æ–∫ –∑–∞–∫—Ä–∏—Ç–∏–π)
3. ‚úÖ M15 –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è **—â–æ–≤–µ—á–æ—Ä–∞** (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
4. ‚úÖ –ó–∞–≤–∂–¥–∏ **fresh —Å–∏–≥–Ω–∞–ª–∏** –¥–ª—è —Ç–æ—Ä–≥—ñ–≤–ª—ñ

**–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –Ω–∞ –∞–≤—Ç–æ–ø—ñ–ª–æ—Ç—ñ!** üöÄ

---

## üìû Troubleshooting

### –Ø–∫—â–æ Task –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è:
1. –ü–µ—Ä–µ–≤—ñ—Ä —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —à–ª—è—Ö –¥–æ .bat —Ñ–∞–π–ª—É
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Å—è —â–æ "Run with highest privileges" —É–≤—ñ–º–∫–Ω–µ–Ω–æ
3. –ü–µ—Ä–µ–≤—ñ—Ä –ª–æ–≥–∏: `logs\daily_retrain.log`

### –Ø–∫—â–æ M15 –ø–æ–≤—ñ–ª—å–Ω–æ —Ç—Ä–µ–Ω—É—î—Ç—å—Å—è:
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π GRU –∑–∞–º—ñ—Å—Ç—å LSTM (`--model-type gru`)
- –í–∏–º–∫–Ω–∏ augmentation (`--no-augment`)
- –ó–º–µ–Ω—à–∏ `years` –¥–æ 3 —è–∫—â–æ –¥—É–∂–µ –ø–æ–≤—ñ–ª—å–Ω–æ

### –Ø–∫—â–æ –Ω–µ –≤–∏—Å—Ç–∞—á–∞—î –ø–∞–º'—è—Ç—ñ:
- –í–∏–º–∫–Ω–∏ ensemble (`--model-type gru` –∑–∞–º—ñ—Å—Ç—å `--ensemble`)
- –ó–º–µ–Ω—à–∏ batch_size –≤ `train_lstm.py`

–£—Å–ø—ñ—à–Ω–æ—ó –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó! üìàüí∞
